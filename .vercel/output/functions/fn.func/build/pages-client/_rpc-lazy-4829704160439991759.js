(()=>{function J(){for(let e of document.scripts)if(e.id&&!/R:\d+/.test(e.id)||e.hasAttribute("src"))V.add(e.id||e.getAttribute("src"))}async function T(e){const n=window,i=document;if(e.nodeName!=="SCRIPT")return;const a=e.getAttribute("src");if(V.has(a)||V.has(e.id))return;await n.lastDiffTransition?.finished;const l=i.createElement("script"),u=e.getAttribute("type");if(a)l.src=a;if(u)l.setAttribute("type",u);if(l.innerHTML=e.innerHTML,await z,a)z=new Promise((m)=>l.onload=l.onerror=()=>m(l.remove()));if(i.head.appendChild(l),!a)l.remove()}var V=new Set,z;async function x(e,n,i){if(e.nodeType!==n.nodeType)return i[0](()=>e.parentNode.replaceChild(n.cloneNode(!0),e));if(e.nodeType===1)await D(e,n,i),i[0](()=>{if(e.nodeName===n.nodeName){if(n.nodeName!=="BODY")I(e.attributes,n.attributes)}else{const a=n.nodeName==="TEMPLATE",l=n.cloneNode(a);while(e.firstChild)l.appendChild(e.firstChild);e.parentNode.replaceChild(l,e)}});else if(e.nodeValue!==n.nodeValue)i[0](()=>e.nodeValue=n.nodeValue)}function I(e,n){let i,a,l,u,m;for(i=e.length;i--;)if(a=e[i],u=a.namespaceURI,m=a.localName,l=n.getNamedItemNS(u,m),!l)e.removeNamedItemNS(u,m);for(i=n.length;i--;){if(a=n[i],u=a.namespaceURI,m=a.localName,l=e.getNamedItemNS(u,m),a.name==="data-action")continue;if(!l)n.removeNamedItemNS(u,m),e.setNamedItemNS(a);else if(l.value!==a.value)l.value=a.value}}async function D(e,n,i){let a,l,u,m,N=null,h=e.firstChild,t=await i[1](n),w=0;while(h)if(w++,a=h,l=E(a),h=h.nextSibling,l){if(!N)N={};N[l]=a}h=e.firstChild;while(t){let f;if(N&&(u=E(t))&&(m=N[u])){if(delete N[u],m!==h)i[0](()=>e.insertBefore(m,h));else h=h.nextSibling;await x(m,t,i)}else if(h)if(a=h,h=h.nextSibling,E(a))f=t.cloneNode(!0),i[0](()=>e.insertBefore(f,a));else await x(a,t,i);else f=t.cloneNode(!0),i[0](()=>e.appendChild(f));if(f?.nodeType===1)await x(f,t,i);if(t=await i[2](t),!f)w--}i[0](()=>{for(l in N)w--,e.removeChild(N[l]);while(--w>=0)e.removeChild(e.lastChild)})}function E(e){return e?.getAttribute?.("key")||e.id}async function Q(e,n={}){const i=document.implementation.createHTMLDocument();i.open();const a=new TextDecoderStream,l=a.readable.getReader();let u=!0;e.pipeTo(a.writable),m();async function m(){try{while(!0){const{done:t,value:w}=await l.read();if(t){u=!1;break}i.write(w)}}finally{i.close()}}while(!i.documentElement||h(i.documentElement))await y();function N(t){return async(w)=>{if(!w)return null;let f=w[t];while(n.shouldIgnoreNode?.(f))f=f[t];if(f)n.onNextNode?.(f);const b=t==="firstChild";while(h(f,b))await y();return f}}function h(t,w){if(!t||!u||t.nextSibling)return!1;if(k.has(t.nodeName))return!i.body?.hasChildNodes?.();let f=t.parentElement;while(f){if(f.nextSibling)return!1;f=f.parentElement}return w?u:u&&!t.hasChildNodes?.()}return{root:i.documentElement,[1]:N("firstChild"),[2]:N("nextSibling"),[0]:(t)=>{if(n.transition&&document.startViewTransition)window.lastDiffTransition=document.startViewTransition(t);else t()}}}async function Y(e,n,i){const a=await Q(n,i),l=a.root;if(e.nodeType===9)e=e.documentElement;if(l.nodeType===11)await D(e,l,a);else await x(e,l,a)}var k=new Set(["HTML","HEAD","BODY"]),y=()=>new Promise((e)=>requestAnimationFrame(e));async function v(e,n,i=[]){const a=o._s,l=e.headers.get("X-Mode"),u=e.headers.get("X-Type"),m=e.headers.get("X-Navigate"),N=e.headers.has("X-Reset"),h=e.headers.get("X-Cid")??n?.cid,t=i===M||l===M,w=u?.includes("C");function f(b){if(a)for(let[d,C]of b)a.set(d,C);else o._S=b}if(N)i[0].target.reset();if(U(e,"json"))f(await e.json());if(m)o._xm=l,location.assign(m);else if(U(e,"html")){J();const b=w?new ReadableStream({async start(d){const C=document.documentElement.outerHTML;d.enqueue(S.encode(C.split(`<!--o:${h}-->`)[0]));const X=e.body.getReader();while(!0){const{value:g,done:A}=await X.read();if(A)break;d.enqueue(g)}d.enqueue(S.encode(C.split(`<!--c:${h}-->`)[1])),d.close()}}):e.body;await Y(document,b,{onNextNode:T,transition:t,shouldIgnoreNode:(d)=>{if(d?.id!=="S")return!1;return f(JSON.parse(d.textContent)),!0}}),await o.lastDiffTransition?.finished}}function U(e,n){return e.body&&e.headers.get("content-type")?.includes(n)}var M="transition",o=window,S=new TextEncoder;o._rpc=v;
})()