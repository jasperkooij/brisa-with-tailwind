"use strict";var W=Object.create;var R=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var B=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty;var F=(i,s,e,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let o of j(s))!D.call(i,o)&&o!==e&&R(i,o,{get:()=>s[o],enumerable:!(r=N(s,o))||r.enumerable});return i};var h=(i,s,e)=>(e=i!=null?W(B(i)):{},F(s||!i||!i.__esModule?R(e,"default",{value:i,enumerable:!0}):e,i));var C=require("@tailwindcss/node"),O=require("@tailwindcss/node/require-cache"),z=require("@tailwindcss/oxide"),A=h(require("fs")),m=require("lightningcss"),S=h(require("path")),E=h(require("postcss"));var x=require("@tailwindcss/node"),u=h(require("path")),b="'",w='"';function v(){let i=new WeakSet;function s(e){let r=e.root().source?.input.file;if(!r)return;let o=e.source?.input.file;if(!o||i.has(e))return;let n=e.params[0],p=n[0]===w&&n[n.length-1]===w?w:n[0]===b&&n[n.length-1]===b?b:null;if(!p)return;let t=e.params.slice(1,-1),d="";if(t.startsWith("!")&&(t=t.slice(1),d="!"),!t.startsWith("./")&&!t.startsWith("../"))return;let g=u.default.posix.join((0,x.normalizePath)(u.default.dirname(o)),t),f=u.default.posix.dirname((0,x.normalizePath)(r)),a=u.default.posix.relative(f,g);a.startsWith(".")||(a="./"+a),e.params=p+d+a+p,i.add(e)}return{postcssPlugin:"tailwindcss-postcss-fix-relative-paths",AtRule:{source:s,plugin:s,config:s}}}var T=class extends Map{constructor(e){super();this.factory=e}get(e){let r=super.get(e);return r===void 0&&(r=this.factory(e,this),this.set(e,r)),r}};function L(i={}){let s=i.base??process.cwd(),e=i.optimize??process.env.NODE_ENV==="production",r=new T(()=>({mtimes:new Map,compiler:null,css:"",optimizedCss:"",fullRebuildPaths:[]}));return{postcssPlugin:"@tailwindcss/postcss",plugins:[v(),{postcssPlugin:"tailwindcss",async OnceExit(o,{result:n}){let p=n.opts.from??"",t=r.get(p),d=S.default.dirname(S.default.resolve(p));async function g(){return(0,O.clearRequireCache)(t.fullRebuildPaths),t.fullRebuildPaths=[],(0,C.compile)(o.toString(),{base:d,onDependency:c=>{t.fullRebuildPaths.push(c)}})}t.compiler??=await g();let f="incremental";{for(let l of t.fullRebuildPaths)n.messages.push({type:"dependency",plugin:"@tailwindcss/postcss",file:l,parent:n.opts.from});let c=n.messages.flatMap(l=>l.type!=="dependency"?[]:l.file);c.push(p);for(let l of c){let y=A.default.statSync(l,{throwIfNoEntry:!1})?.mtimeMs??null;if(y===null){l===p&&(f="full");continue}t.mtimes.get(l)!==y&&(f="full",t.mtimes.set(l,y))}}let a="",P=new z.Scanner({detectSources:{base:s},sources:t.compiler.globs}),V=P.scan();for(let c of P.files)n.messages.push({type:"dependency",plugin:"@tailwindcss/postcss",file:c,parent:n.opts.from});for(let{base:c,pattern:l}of P.globs)n.messages.push({type:"dir-dependency",plugin:"@tailwindcss/postcss",dir:c,glob:l,parent:n.opts.from});f==="full"&&(t.compiler=await g()),a=t.compiler.build(V),a!==t.css&&e&&(t.optimizedCss=U(a,{minify:typeof e=="object"?e.minify:!0})),t.css=a,o.removeAll(),o.append(E.default.parse(e?t.optimizedCss:t.css,n.opts))}}]}}function U(i,{file:s="input.css",minify:e=!1}={}){return(0,m.transform)({filename:s,code:Buffer.from(i),minify:e,sourceMap:!1,drafts:{customMedia:!0},nonStandard:{deepSelectorCombinator:!0},include:m.Features.Nesting,exclude:m.Features.LogicalProperties,targets:{safari:16<<16|1024},errorRecovery:!0}).code.toString()}var M=Object.assign(L,{postcss:!0});module.exports=M;
