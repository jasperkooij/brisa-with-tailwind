function c(Z,W){while(Z){if(Z.tagName==="CONTEXT-PROVIDER"&&W===Z.getAttribute("cid")){const z=Z.getAttribute("pid");if(z)return z}Z=Z.assignedSlot??Z.host??Z.parentNode}return null}function QJ(Z){return typeof Z!=="object"?Z:JSON.stringify(Z,(W,z)=>z===void 0?"_|U|_":z)}function i(Z){if(!Z)return Z;try{return JSON.parse(Z,(W,z)=>z==="_|U|_"?void 0:z)}catch(W){return Z}}function IJ(){const Z=new Set;return{["s"](W){Z.add(W)},["n"](...W){for(let z of Z)z(...W)},["u"](W){Z.delete(W)}}}var l=window,A=l._s??={Map:new Map};for(let[Z,W]of l._S??[])A.Map.set(Z,W);var n=l.sub??=IJ();for(let Z of["get","set","delete"])A[Z]=(W,z)=>{const K=A.Map[Z](W,z);return n.n(W,z,Z==="get"),K};function u(){const Z=[],W=new Map,z=(J,Q)=>J.get(Q)??new Set,K=new Map,P=new Map,O=new Map;let g=!1;function h(J,Q,X){const B=W.get(J)??H(Q);X?B.value:B.value=Q,W.set(J,B)}function k(J){const Q=Z.indexOf(J);if(Q>-1)Z.splice(Q,1)}function q(J){const Q=z(P,J);for(let X of Q)X();P.delete(J)}function Y(J){const Q=(X)=>{const B=z(O,J);return B.add(X),O.set(J,B),X};return Q.id=J,Q}function D(J){const Q=z(O,J);for(let X of Q){q(X),D(X);for(let B of K.keys()){const F=K.get(B);if(F.delete(X),F.size===0)K.delete(B)}}O.delete(J)}function H(J){return{get value(){if(Z[0])K.set(this,z(K,this).add(Z[0]));return J},set value(Q){const X=Q===J&&Q!=null;if(J=Q,X)return;const B=z(K,this),F=new Set(B);for(let U of B){if(U===Z[0])continue;if(F.has(U))D(U),q(U),M(U)}}}}async function M(J){Z.unshift(J);const Q=J(Y(J));if(Q?.then)await Q;k(J)}function m(){for(let J of P.keys())q(J);P.clear(),K.clear(),O.clear(),w(!1)}function w(J=!0){if(g===J)return;g=J,n[J?"s":"u"](h)}function L(J,Q){const X=z(P,Q);X.add(J),P.set(Q,X)}function x(J){const Q=H();return M(()=>{Q.value=J()}),Q}const I={...A,setOptimistic(J,Q,X){const B="__ind:"+J,F="__o:"+Q,U=I.get(Q),G=X(U);I.set(B,!0),I.set(F,G),M(()=>{if(!I.get(B)&&I.get(Q)===G)I.delete(F)})},get(J){return w(),A.get("__o:"+J)??A.get(J)},has(J){return I.get(J)!==void 0}};function S(J){const Q="__ind:"+J,X=x(()=>!!I.get(Q));return X.id=Q,X.error=x(()=>I.get("e"+Q)),X}return{state:H,store:I,effect:M,reset:m,cleanup:L,derived:x,indicate:S}}var y=(Z)=>Z.toLowerCase();function r(Z){let W="";for(let z in Z){const K=y(z.replace(/([A-Z])/g,"-$1"));W+=`${K}:${Z[z]};`}return W}var HJ=Symbol("on"),UJ=Symbol("off"),jJ="http://www.w3.org/",s=jJ+"2000/svg",YJ=jJ+"1999/xlink",ZJ="HTML",zJ="indicator",WJ="brisa-request",_J="portal",a="slot",BJ="key",qJ="connectedCallback",$J="dis"+qJ,t="inner"+ZJ,DJ="p",f="l",v=null,OJ="context",FJ=(Z)=>typeof Z==="object",d=(Z)=>Z?.some?.(FJ),e=Array.from,GJ=(Z)=>Z instanceof CustomEvent,b=(Z)=>typeof Z==="function",JJ=(Z)=>Z.startsWith("on"),E=(Z,W)=>Z.appendChild(W);function KJ(Z,W=[]){const z=document,K=window,P=(q)=>{if(q===!1)q="";return z.createTextNode((Array.isArray(q)?q.join(""):q??"").toString())},O=(q,Y)=>{return q==="svg"||Y?.namespaceURI===s&&y(Y.tagName)!=="foreignobject"?z.createElementNS(s,q):z.createElement(q)},g=(q,Y,D)=>{const H=D===HJ,M=D===UJ;let w=Y==="style"&&FJ(D)?r(D):QJ(D);const L=q.namespaceURI===s&&(Y.startsWith("xlink:")||Y==="href");if(Y===zJ)if(D)q.classList.add(WJ);else q.classList.remove(WJ);else if(Y==="ref")D.value=q;else if(L)if(M)q.removeAttributeNS(YJ,Y);else q.setAttributeNS(YJ,Y,H?"":w);else if(M)q.removeAttribute(Y);else q.setAttribute(Y,H?"":w)},h=[],k={};W.push(BJ);for(let q of W){const Y=y(q);k[Y]=k[q]=q,h.push(Y)}return class extends HTMLElement{p;l;s;static get observedAttributes(){return h}static formAssociated=!0;async[qJ](){const q=this,Y=q.shadowRoot??q.attachShadow({mode:"open"}),D=[],H=[],M=new CSSStyleSheet;let m=0;const w=[];for(let J of z.styleSheets)try{for(let Q of J.cssRules)w.push(Q.cssText)}catch(Q){w.push(`@import url('${J.href}');`)}M.replaceSync(w.join("")),Y.adoptedStyleSheets.push(M);function L(J,Q){if(J?.[0]!==_J)return[J,Q];const{element:X,target:B}=J[1];return[X,B]}async function x(J,Q,X,B,F,U,G=!1){if(X?.then)X=await X;if(G){if(q.shadowRoot)q.shadowRoot[t]="";if(H.length){const j=O("style");U(()=>{let _="";for(let[R,...V]of H)_+=String.raw(R,...V.map((T)=>b(T)?T():T));j.textContent=_}),E(Y,j)}}[X,B]=L(X,B);let $=J?O(J,B):B;for(let[j,_]of Object.entries(Q)){const R=JJ(j),V=j===zJ;if(R)$.addEventListener(y(j.slice(2)),(T)=>_.apply(null,GJ(T)?T.detail:[T]));else if(V||!R&&b(_))U(F(()=>g($,j,V?_?.value:_())));else g($,j,_)}if(X?.[0]===ZJ)$[t]+=X[1].html;else if(X===a)E($,O(a));else if(d(X))if(d(X[0]))for(let j of X)x(v,{},j,$,F,U);else x(...X,$,F,U);else if(b(X)){let j;const _=(R)=>{if(j&&$.contains(j[0])){$.insertBefore(R,j[0]);for(let V of j)V?.remove()}else E($,R)};U(F((R)=>{const V=X();function T(C){[C,$]=L(C,$);const XJ=C?.[0]===ZJ;if(XJ||d(C)){const p=e($.childNodes),o=z.createDocumentFragment();if(XJ){const N=O("p");N[t]+=C[1].html;for(let MJ of e(N.childNodes))E(o,MJ)}else if(d(C[0]))for(let N of C)x(v,{},N,o,F(R),U);else if(C.length)x(...C,o,F(R),U);_(o),j=e($.childNodes).filter((N)=>!p.includes(N))}else{const p=P(C);_(p),j=[p]}}if(V instanceof Promise)V.then(T);else T(V)}))}else E($,P(X));if(J)E(B,$)}const I=(J,Q,X=u(),B=DJ)=>{q.s=X,q[B]={};for(let G of W)q[B][k[G]]=JJ(G)?q.e(G):X.state(i(q.getAttribute(G)));const F={children:[a,{},v],...q[B],...Q},U={...X,onMount(G){D.push(G)},useId(){return q.dataset[`id-${++m}`]??crypto.randomUUID()},useContext(G){return X.derived(()=>{const $=c(q,G.id);return $?X.store.get(`${OJ}:${G.id}:${$}`):G.defaultValue})},css(G,...$){H.push([G,...$])},i18n:K.i18n,route:K.r,self:q};return H.length=0,x(v,{},J(F,U),Y,(G)=>G,X.effect,!0)},S=u();try{if(b(Z.suspense))await I(Z.suspense,v,S,f);await I(Z),S.reset(),delete q[f]}catch(J){if(S.reset(),q.s.reset(),b(Z.error))I(Z.error,{error:q.s.state(J)});else throw J}for(let J of D)J()}[$J](){this.s?.reset()}e(q){return(...Y)=>{const D=new CustomEvent(y(q.slice(2)),{detail:GJ(Y?.[0])?Y[0].detail:Y});this.dispatchEvent(D)}}attributeChangedCallback(q,Y,D){const H=this,M=H[f]?f:DJ;if(q===BJ&&Y!=v&&Y!==D)H[$J](),H[qJ]();if(H[M]&&Y!==D&&!JJ(q))H[M][k[q]].value=i(D)}}}export{KJ as brisaElement,HJ as _on,UJ as _off};
